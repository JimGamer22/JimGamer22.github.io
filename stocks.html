<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meine Aktien ‚Äì NVIDIA</title>
<style>
  body { background: #0a0a0a; color: #fff; font-family: Arial, sans-serif; text-align: center; padding: 40px 20px; }
  h1 { font-size: 3rem; margin-bottom: 20px; }
  .box { background: #111; padding: 30px; border-radius: 12px; max-width: 600px; margin: auto; box-shadow: 0 0 20px #00ffcc55; }
  .label { opacity: 0.7; margin-top: 20px; }
  .value { font-size: 2.5rem; font-weight: bold; margin-top: 5px; }
  .plus { color: #00ff88; }
  .minus { color: #ff4444; }
  a { color: #00ffcc; text-decoration: none; display: block; margin-top: 30px; }
  canvas { max-width: 100%; margin-top: 40px; }
</style>
</head>
<body>

<h1>üìà NVIDIA Aktien ‚Äì Live</h1>
<div class="box">
  <div class="label">Aktueller Preis (USD):</div>
  <div id="price" class="value">‚Äì</div>

  <div class="label">Gesamtwert (CHF):</div>
  <div id="valueCHF" class="value">‚Äì</div>

  <div class="label">Gewinn / Verlust:</div>
  <div id="profit" class="value">‚Äì</div>
</div>

<canvas id="chart"></canvas>

<a href="index.html">‚Üê Zur√ºck</a>

<script>
// --- Konfiguration ---
const investedCHF = 100;
const usdToChf = 0.90; // Kurs anpassen wenn n√∂tig
const shares = investedCHF / (150 * usdToChf); // Passe 150 an deinen Kaufpreis

// Funktion Load Data
async function load() {
  try {
    const resp = await fetch('https://query1.finance.yahoo.com/v8/finance/chart/NVDA?interval=1d&period1=0&period2=' + Math.floor(Date.now()/1000));
    const json = await resp.json();
    const priceUSD = json.chart.result[0].meta.regularMarketPrice;
    const priceCHF = priceUSD * usdToChf;
    const totalCHF = shares * priceCHF;
    const profit = totalCHF - investedCHF;

    document.getElementById('price').innerText = priceUSD.toFixed(2) + ' US$';
    document.getElementById('valueCHF').innerText = totalCHF.toFixed(2) + ' CHF';
    const p = document.getElementById('profit');
    p.innerText = (profit >= 0 ? '+' : '') + profit.toFixed(2) + ' CHF';
    p.className = profit >= 0 ? 'value plus' : 'value minus';

    // Chart zeichnen
    const timestamps = json.chart.result[0].timestamp;
    const prices = json.chart.result[0].indicators.quote[0].close;
    drawChart(timestamps.map(t => new Date(t*1000)), prices);

  } catch (e) {
    console.error('Fehler beim Laden:', e);
  }
}

// Chart-Funktion
function drawChart(dates, data) {
  const ctx = document.getElementById('chart').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: dates.map(d => d.toISOString().split('T')[0]),
      datasets: [{ label: 'NVIDIA Preis (USD)', data, borderColor: '#00ccff', backgroundColor: 'rgba(0,204,255,0.2)' }]
    },
    options: { scales: { x: { ticks: { maxRotation: 90, minRotation: 45 } } }, plugins: { legend: { display: false } } }
  });
}

// Lade Chart‚ÄëLibrary (Chart.js)
const s = document.createElement('script');
s.src = 'https://cdn.jsdelivr.net/npm/chart.js';
s.onload = load;
document.body.appendChild(s);
</script>

</body>
</html>

